name: ":Publish SARIF results to GitHub"
description: "Publish SARIF results from .NET code analysis to GitHub actions as annotations and summary markdown"

inputs:
  report-path:
    description: "Path to SARIF report file generated by code analysis (e.g., ./report/)"
    required: true
    default: "./"

  report-name:
    description: "Full report name without extension (e.g., 'dotnet_report.sarif')"
    required: true
    default: "dotnet_report.sarif"

  report-title:
    description: "Name for the report artifact (used in GitHub Actions)"
    required: false
    default: "report-sarif"

runs:
  using: "composite"
  steps:
    - name: Publish InspectCode Report Artifact
      uses: actions/upload-artifact@v4
      with:
        name: ${{ inputs.report-name }}
        path: ${{ inputs.report-path }}${{ inputs.report-name }}

    - name: Generate Markdown Report
      if: always()
      uses: ./bin/actions/dotnet-sarif-md
      with:
        report-path: ${{ inputs.report-path }}${{ inputs.report-name }}
